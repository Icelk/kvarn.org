!> tmpl standard.html
<!-- tmpl-ignore -->
[head]
<title>Kvarn web server</title>
[highlight] [dependencies]
<style>
    #top-bar .middle {
        width: 18rem;
        visibility: hidden;
    }

    #main-logo-container {
        --height: 24rem;

        z-index: 10;
        display: flex;
        flex-direction: row;
        justify-content: center;

        height: calc(var(--height) - 2rem);
        background: var(--bg-head);
        clip-path: polygon(100% -100%, 100% 40%, 90% 60%, 75% 72%, 63% 100%, 40% 100%, 20% 57%, 0 35%, 0 -100%);

        position: relative;
    }

    #main-logo {
        position: absolute;
        bottom: 0;

        width: var(--height);

        margin-left: auto;
        margin-right: auto;

        pointer-events: none;
    }

    #shortcut-buttons {
        margin: 1rem;
    }

    #shortcut-buttons div {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
    }

    #search {
        flex-basis: 8em;
        flex-shrink: 1;
    }

    md {
        margin-bottom: 5rem;
    }
</style>
[close-head] [navigation]

<div id="main-logo-container">
    <img id="main-logo" src="/logo.svg" alt="Kvarn logo" />
</div>
<div id="shortcut-buttons">
    <div>
        <a href="https://doc.kvarn.org/" class="solid-button">Rust doc</a>
        <a href="https://github.com/Icelk/kvarn" class="solid-button">GitHub</a>
        <span class="solid-button input hide-overlay-on-input" id="search">
            <input type="text" name="search" id="searchInput" placeholder=" " />
            <span class="overlay">Search</span>
        </span>
    </div>
    <div>
        <a href="#getting-started" class="solid-button">Getting started</a>
        <a href="#applications" class="solid-button">Applications</a>
        <a href="#license" class="solid-button">License</a>
        <a href="https://github.com/Icelk/kvarn/blob/main/roadmap.md" class="solid-button">Roadmap</a>
    </div>
</div>

<md>
    <center>
        <blockquote style="display: inline-block; margin: 0 1rem">
            <b>A forward-thinking fast web server designed to fit <i>your</i> needs, efficiently.</b>
        </blockquote>
    </center>
    <h1>About</h1>
    <p>
        Kvarn is a <a href="https://rust-lang.org">rusty</a>, <a href="https://github.com/Icelk/kvarn/blob/main/LICENSE">open-source</a>, forwards-thinking
        web server designed with <a href="extensions/">extensibility</a>, out of the box
        <a href="security/">security</a>, and consistent <a href="features/#performance">performance</a> with it's
        <a href="cache.">built-in cache.</a>
    </p>
    <p>
        You can follow progress on <a href="https://github.com/Icelk/kvarn/">GitHub</a> where the project is hosted. The
        project is under active development to add features, reduce complexity, improve performance, and fix issues.
    </p>

    <h1 id="getting-started">Getting started</h1>
    <p>
        Kvarn is programmed using <a href="https://rust-lang.org">Rust</a>. You'll need to
        <a href="https://www.rust-lang.org/tools/install">download it</a> before using the Kvarn web server.
    </p>
    <p>Then, enter a directory and initiate a Cargo (Rust's package manager, like NPM to node.js) project.</p>
    <pre><code class="language-shell">$ cargo init</code></pre>
    <p>Next, add these dependencies in your <code>Cargo.toml</code>.</p>
    <pre><code class="language-ini">kvarn = "^0.3"
tokio = { version = "^1.13", features = \["macros", "rt-multi-thread"] }
env_logger = "^0.9"</code></pre>
    <p>Now, you can edit <code>src/main.rs</code> and replace the <code>Hello world!</code> example with this.</p>
    <pre><code class="languageâ€“rust">use kvarn::prelude::*;

#\[tokio::main]
async fn main() {
    // Initiate the logger. Set the environment variable `RUST_LOG` to `info` to get finer logging.
    env_logger::init();
    // Create a host with hostname "localhost", serving files from directory "./web/public/", with the default extensions and the default options.
    let host = Host::unsecure("localhost", PathBuf::from("web"), Extensions::default(), host::Options::default());
    // Create a set of virtual hosts (`Data`) with `host` as the default.
    let data = Data::builder().insert(host).build();
    // Bind port 8080 with `data`.
    let port_descriptor = PortDescriptor::unsecure(8080, data);

    // Run with the configured ports.
    let shutdown_manager = RunConfig::new().bind(port_descriptor).execute().await;
    // Waits for shutdown.
    shutdown_manager.wait().await;
}</code></pre>
    <p>Start it with the following command.</p>
    <pre><code class="language-shell">$ cargo run</code></pre>
    <p>
        Now you have a web server running at <a href="http://localhost:8080/">localhost:8080</a> serving files from
        <code>web/public/</code> relative to the directory.
    </p>
    <blockquote>
        <p>
            Soon, the <a href="https://github.com/Icelk/kvarn-reference">reference implementation</a> will use a
            <a href="/config.">configuration file</a>. Until then, you have to use the Kvarn library from Rust code
            and therefore compile in all the hosts and extensions.
        </p>
        <p>
            For a battle-tested implementation, see the link above.
        </p>
    </blockquote>

    <h1 id="docs">Docs</h1>
    <p>
        <ul>
            <li><a href="pipeline.">The pipeline of handling a request.</a></li>
            <li><a href="errors.">All errors in the pipeline. These surface as various error responses with appropriate status codes.</a></li>
        </ul>
    </p>

    <h1 id="applications">Applications</h1>
    <p>
        Kvarn can be used for anything ranging from large-scale websites in need of throughput and availability, to
        personal websites with the ability to host unlimited domains from one IP, to IOT devices, like the Raspberry Pi.
    </p>
    <p>
        All features are configurable; if you want the latest HTTP and Web features, you can enable those features at
        compile-time. Of you on the other hand run Kvarn as a web interface for a local device and don't need security
        or the latest features, but require compile-time and only have spare resources, you can disable those features,
        not compiling in HTTPS or HTTP/2 support.
    </p>
    <p>
        The extension system allows for easy creation of APIs and can interact with the host machine asynchronously. It
        can access databases, change the GPIO pins, or anything else a program can do. When disabling features, no APIs
        change. You always get the same developer experience.
    </p>

    <h1 id="license">License</h1>
    <p>
        The text and logo on this website is licensed under the
        <a href="text-license.txt">CC-BY-SA-4.0 License</a>. The code examples and JavaScript source code is licensed
        under the <a href="code-license.txt">MIT</a> license.
    </p>

    <h1 id="resources">Resources</h1>
    <div class="list">
        <a href="https://github.com/Icelk/kvarn/blob/main/roadmap.md">Roadmap</a>
        <a href="https://github.com/Icelk/kvarn.org">GitHub repo for this website</a>
        <a href="https://www.ralfj.de/blog/2019/07/14/uninit.html">In-depth about uninitialized memory</a>
        <a href="https://rust-lang.github.io/rfcs/2930-read-buf.html">Rust ReadBuf RFC</a>
        <a href="https://tonsky.me/blog/font-size/">Article about font-size on the web</a>
    </div>
</md>

[footer]
